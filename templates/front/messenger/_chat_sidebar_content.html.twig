{# Contenu injecté dans la Chat Sidebar de la navbar (liste des conversations uniquement) #}
<div class="navbar-chat-sidebar-inner">
    <div class="navbar-chat-sidebar-search-wrap">
        <i class="fas fa-search"></i>
        <input type="text" id="navbarChatSidebarListSearch" class="navbar-chat-sidebar-list-search-input" placeholder="Rechercher une conversation..." autocomplete="off" aria-label="Rechercher une conversation">
    </div>

    {# Tabs + Menu 3 points sur une seule ligne #}
    <div class="navbar-chat-sidebar-tabs-row">
        <div class="navbar-chat-sidebar-tabs">
            <button type="button" class="navbar-chat-sidebar-tab active" data-tab="all" aria-pressed="true"><i class="fas fa-inbox"></i> Tous</button>
            <button type="button" class="navbar-chat-sidebar-tab" data-tab="unread" aria-pressed="false"><i class="fas fa-envelope"></i> Non lu</button>
            <button type="button" class="navbar-chat-sidebar-tab" data-tab="groups" aria-pressed="false"><i class="fas fa-users"></i> Groupes</button>
        </div>
        <div class="navbar-chat-sidebar-menu-wrap">
            <button type="button" class="navbar-chat-sidebar-menu-btn" id="navbarChatSidebarMenuBtn" aria-label="Menu" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-ellipsis-h"></i>
            </button>
            <div class="navbar-chat-sidebar-dropdown" id="navbarChatSidebarMenuDropdown" role="menu" aria-hidden="true">
                <a href="{{ path('app_messenger_index', { archived: 1 }) }}" class="navbar-chat-sidebar-dropdown-item" role="menuitem">
                    <i class="fas fa-archive"></i> Conversations archivées
                </a>
                <a href="{{ path('app_messenger_reported_conversations') }}" class="navbar-chat-sidebar-dropdown-item" role="menuitem">
                    <i class="fas fa-flag"></i> Conversations signalées
                </a>
            </div>
        </div>
    </div>

    <div class="navbar-chat-sidebar-threads" id="navbarChatSidebarThreads">
        {% for conv in conversations %}
            <div class="navbar-chat-sidebar-thread-wrap" data-is-group="{{ conv.isGroup ? '1' : '0' }}" data-unread="0">
                {% include 'front/messenger/_thread_item.html.twig' with { conv: conv, actor: actor, current_conversation: null } %}
            </div>
        {% else %}
            <div class="thread-item thread-item-empty">
                <div class="thread-preview">Aucune conversation.</div>
            </div>
        {% endfor %}
    </div>

    <div class="navbar-chat-sidebar-footer">
        <a href="{{ path('app_messenger_index') }}" class="navbar-chat-sidebar-see-all">
            <i class="fas fa-external-link-alt"></i> Tout voir dans Messenger
        </a>
    </div>
</div>
