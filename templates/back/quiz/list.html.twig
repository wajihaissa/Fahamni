{% extends 'base.html.twig' %}

{% block title %}Quiz - FAHIMNI Admin{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root{
            --bg:#f8fafc;--card:#ffffff;--muted:#6b7280;--text-primary:#0b1220;--border:#e5e7eb;--primary:#6c5ce7;--primary-grad:linear-gradient(90deg,#7c6cff 0%,#6c5ce7 100%);--primary-gradient:linear-gradient(135deg,#667eea 0%,#764ba2 100%);--radius:12px;--shadow:0 6px 18px rgba(11,18,32,0.06);--sidebar-width:280px;
        }
        body{font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;background:var(--bg);color:var(--muted)}
        .sidebar{position:fixed;top:0;left:0;width:var(--sidebar-width);height:100vh;background:linear-gradient(180deg,#3b2f63 0%,#2b2350 100%);color:#fff;box-shadow:0 12px 40px rgba(19,24,44,0.25);z-index:1000;overflow-y:auto;}
        .sidebar-header{padding:1rem 0.5rem;border-bottom:1px solid rgba(255,255,255,0.04);margin-bottom:6px;}
        .sidebar .logo h2{color:#fff;font-size:18px;font-weight:700;margin:0 0 4px 8px;letter-spacing:0.3px;}
        .sidebar .logo .brand-sub{color:rgba(255,255,255,0.75);font-size:12px;margin-left:8px;}
        .admin-profile{padding:12px 8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.04);}
        .admin-info h4{color:#fff;margin:0;font-size:14px;}
        .admin-info p{color:rgba(255,255,255,0.65);margin:2px 0 0 0;font-size:12px;}
        .sidebar-nav{list-style:none;padding:6px;margin:6px 0;}
        .sidebar-nav li{margin:6px 0;}
        .sidebar-nav a{display:flex;align-items:center;gap:12px;padding:10px 12px;color:rgba(255,255,255,0.86);text-decoration:none;border-radius:10px;position:relative;transition:background 0.18s ease,transform 0.12s ease;}
        .sidebar-nav a i{width:26px;text-align:center;font-size:14px;color:inherit;}
        .sidebar-nav a .label{font-size:14px;}
        .sidebar-nav a:hover{background:rgba(255,255,255,0.04);color:#fff;transform:translateX(3px);}
        .sidebar-nav li.active a{background:rgba(255,255,255,0.04);color:#fff;font-weight:600;}
        .main-content{margin-left:var(--sidebar-width);min-height:100vh;}
        .admin-container{max-width:1200px;margin:0 auto;padding:2rem;}
        .page-header{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:1rem;margin-bottom:2rem;}
        .page-header h1{font-size:1.75rem;font-weight:700;color:var(--text-primary);margin:0 0 0.25rem 0;}
        .page-header p{font-size:0.95rem;color:var(--muted);margin:0;}
        .quizzes-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.25rem;}
        .quiz-card{background:var(--card);border-radius:var(--radius);border:1px solid var(--border);padding:1.25rem;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:1rem;transition:transform 0.2s ease,box-shadow 0.2s ease;}
        .quiz-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(11,18,32,0.08);}
        .quiz-card-header{display:flex;align-items:flex-start;gap:12px;}
        .quiz-icon{width:48px;height:48px;background:var(--primary-grad);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:1.25rem;flex-shrink:0;}
        .quiz-title{font-size:1.1rem;font-weight:700;color:var(--text-primary);margin:0;}
        .quiz-meta{font-size:0.875rem;color:var(--muted);margin-top:4px;}
        .quiz-button{padding:0.5rem 1rem;background:var(--primary-grad);color:#fff;border:none;border-radius:8px;font-weight:600;font-size:0.9rem;cursor:pointer;text-decoration:none;text-align:center;transition:transform 0.2s ease;}
        .quiz-button:hover{transform:scale(1.02);}
        .empty-state{text-align:center;padding:3rem;background:var(--card);border-radius:var(--radius);border:1px solid var(--border);}
        .empty-state-icon{font-size:2.5rem;margin-bottom:1rem;opacity:0.6;}
        .empty-state h3{font-size:1.15rem;font-weight:600;color:var(--text-primary);margin-bottom:0.5rem;}
        .empty-state p{color:var(--muted);margin:0;}
    </style>
{% endblock %}

{% block body %}
    {% include 'back/_sidebar.html.twig' %}
    <div class="main-content">
        {% include 'back/_admin_navbar.html.twig' %}
        <div class="admin-container">
            <div class="page-header">
                <div>
                    <h1><i class="fas fa-question-circle" style="margin-right:0.5rem;"></i> Quiz</h1>
                    <p>GÃ©rer les quiz de la plateforme</p>
                </div>
                <a href="{{ path('admin_quiz_create') }}" class="quiz-button" style="margin:0;">
                    <i class="fas fa-plus" style="margin-right:8px;"></i> Nouveau quiz
                </a>
            </div>

            {% if quizzes|length > 0 %}
            <div class="quizzes-grid">
                {% for quiz in quizzes %}
                <div class="quiz-card">
                    <div class="quiz-card-header">
                        <div class="quiz-icon"><i class="fas fa-book"></i></div>
                        <div>
                            <h3 class="quiz-title">{{ quiz.titre }}</h3>
                            <div class="quiz-meta">
                                <i class="fas fa-question-circle"></i> {{ quiz.questions|length }} question(s)
                            </div>
                        </div>
                    </div>
                    <a href="{{ path('admin_quiz_edit', {'id': quiz.id}) }}" class="quiz-button">
                        Modifier <i class="fas fa-edit" style="margin-left:8px;"></i>
                    </a>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="empty-state">
                <div class="empty-state-icon">ðŸ“š</div>
                <h3>Aucun quiz</h3>
                <p>CrÃ©ez votre premier quiz avec le bouton ci-dessus.</p>
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
